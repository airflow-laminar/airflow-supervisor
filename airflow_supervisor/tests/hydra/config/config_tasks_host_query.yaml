# @package _global_
_target_: airflow_config.Configuration

defaults:
  - balancer@extensions.balancer

dags:
  example_dag:
    schedule: "0 3 * * *"
    start_date: 2023-01-01
    tasks:
      run:
        _target_: airflow_supervisor.SupervisorSSHTask
        cfg:
          _target_: airflow_supervisor.SupervisorSSHAirflowConfiguration
          convenience:
            _target_: airflow_supervisor.ConvenienceConfiguration
            local_or_remote: remote
          working_dir: /data
          program:
            echo:
              _target_: airflow_supervisor.ProgramConfiguration
              command: echo "hello"
        host:
          _target_: airflow_balancer.HostQuery
          balancer: ${extensions.balancer}
          name: server2
        port:
          _target_: airflow_balancer.PortQuery
          balancer: ${extensions.balancer}
          name: my-app
